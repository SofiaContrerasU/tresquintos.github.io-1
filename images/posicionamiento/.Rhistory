labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                             Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "(Tresquintos.cl)") +
theme(plot.caption = element_text(hjust = 0)) +
ylim(-1.1, 1.1)+
coord_flip()
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                             Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "(Tresquintos.cl)") +
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                             Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "(Tresquintos.cl)") +
theme(caption.text.x=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                             Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "(Tresquintos.cl)") +
theme(caption.text=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                             Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "(Tresquintos.cl)") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                             Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                                          Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                                                        Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                                                                       Izquierda')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="      Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                                                                       Izquierda')+
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 2
ggplot()  +
geom_text(data = d1,
aes(x=reorder(label, coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="Ordenamiento Ideológico Constituyentes") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Derecha                                                                                                       Izquierda')+
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
##Clean
rm(list=ls())
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación comisiones/7_sist_conocimientos.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Drop
raw_data[1:1] <- list(NULL)
## Coding Standards
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Prepare data for RC
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
legData<-matrix(CC[,2],length(CC[,2]),1)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
## Get Ideal Points (Llanquileo; Bown)
result <- wnominate(rc, dims = 2, polarity = c(12,1))
summary(result)
## Plot WNominate
plot(result)
## Something for plot2
d1 <- cbind(label=rownames(result$legislators), result$legislators)
d1 <- d1[order(d1$coord1D),]
## invert coordinates (so right is on the right)
d1$coord1D <- -1*d1$coord1D
## Plot 701
plot601 <- ggplot()  +
geom_hline(yintercept=0.0, linetype="dashed", color = "red", size=0.2) +
geom_text(data = d1,
aes(x=reorder(label,coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="Ordenamiento Ideológico Constituyentes", subtitle="Comisión de Sistemas de Conocimiento") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Izquierda                                                                                                   Derecha')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 601
plot701
ggsave(plot = plot701, "puntos_ideales_conocimiento.png", width = 5, height = 5, units = "in", dpi = 300)
##Clean
rm(list=ls())
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación comisiones/7_sist_conocimientos.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Drop
raw_data[1:1] <- list(NULL)
## Coding Standards
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
View(raw_data)
## Prepare data for RC
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
legData<-matrix(CC[,2],length(CC[,2]),1)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
##Clean
rm(list=ls())
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación comisiones/7_sist_conocimientos.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Drop
raw_data[1:1] <- list(NULL)
## Coding Standards
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Prepare data for RC
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
legData<-matrix(CC[,2],length(CC[,2]),1)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
View(raw_data)
View(legData)
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
##Clean
rm(list=ls())
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación comisiones/7_sist_conocimientos.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Drop
raw_data[1:1] <- list(NULL)
## Coding Standards
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Prepare data for RC
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
legData<-matrix(CC[,2],length(CC[,2]),1)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
View(raw_data)
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
###################################################
# SETTINGS
###################################################
rm(list=ls())
setwd("/Users/kennethbunker/Dropbox/GitHub/tresquintos.github.io/images/posicionamiento/")
###################################################
# REFERENCES
###################################################
# https://github.com/jaytimm/mds-for-linguists/blob/master/README.md
# https://github.com/imfd/notas-blog/blob/main/nominate/20%20Septiembre/DW-Nominate.R
# Dataset only has "1", "6" and "9"
###################################################
# LIBRARY
###################################################
if (!require("pacman")) install.packages("pacman")
pacman::p_load(# anominate, -- no longer maintained --
wnominate,
pscl,
ggplot2,
knitr,
devtools,
ggrepel,
writexl,
data.table)
library(coda)
library(purrr)
library(dplyr)
library(tidyverse)
library(rvest)
library(tidytext)
library(stringi)
library(stringr)
library(readxl)
library(pscl)
library(wnominate)
##Clean
rm(list=ls())
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación comisiones/7_sist_conocimientos.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Drop
raw_data[1:1] <- list(NULL)
## Coding Standards
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Prepare data for RC
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
legData<-matrix(CC[,2],length(CC[,2]),1)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
## Get Ideal Points (Llanquileo; Bown)
result <- wnominate(rc, dims = 2, polarity = c(12,1))
summary(result)
## Plot WNominate
plot(result)
## Something for plot2
d1 <- cbind(label=rownames(result$legislators), result$legislators)
d1 <- d1[order(d1$coord1D),]
## invert coordinates (so right is on the right)
d1$coord1D <- -1*d1$coord1D
## Plot 701
plot601 <- ggplot()  +
geom_hline(yintercept=0.0, linetype="dashed", color = "red", size=0.2) +
geom_text(data = d1,
aes(x=reorder(label,coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="Ordenamiento Ideológico Constituyentes", subtitle="Comisión de Sistemas de Conocimiento") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Izquierda                                                                                                   Derecha')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 601
plot701
ggsave(plot = plot701, "puntos_ideales_conocimiento.png", width = 5, height = 5, units = "in", dpi = 300)
##Clean
rm(list=ls())
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación comisiones/7_sist_conocimientos.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Drop
raw_data[1:1] <- list(NULL)
## Coding Standards
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Prepare data for RC
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
legData<-matrix(CC[,2],length(CC[,2]),1)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
## Get Ideal Points (Llanquileo; Bown)
result <- wnominate(rc, dims = 2, polarity = c(12,1))
summary(result)
## Plot WNominate
plot(result)
## Something for plot2
d1 <- cbind(label=rownames(result$legislators), result$legislators)
d1 <- d1[order(d1$coord1D),]
## invert coordinates (so right is on the right)
d1$coord1D <- -1*d1$coord1D
## Plot 701
plot701 <- ggplot()  +
geom_hline(yintercept=0.0, linetype="dashed", color = "red", size=0.2) +
geom_text(data = d1,
aes(x=reorder(label,coord1D),
y=coord1D,
label=label),
size=1,
color = 'blue') +
#  theme_classic() +
theme_minimal() +
labs(title="Ordenamiento Ideológico Constituyentes", subtitle="Comisión de Sistemas de Conocimiento") +
theme(axis.text.y=element_blank(),
axis.ticks.y=element_blank())+
xlab('') + ylab('Izquierda                                                                                                   Derecha')+
theme(axis.title.x=element_text(size=rel(.7), angle=0))+
theme(axis.text.x=element_text(size=rel(.7), angle=0))+
labs(caption = "Tresquintos.cl") +
theme(plot.caption=element_text(size=rel(.3)))+
ylim(-1.1, 1.1)+
coord_flip()
## Plot 601
plot701
ggsave(plot = plot701, "puntos_ideales_conocimiento.png", width = 5, height = 5, units = "in", dpi = 300)
