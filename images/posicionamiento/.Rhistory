## Plot 701
plot701
ggsave(plot = plot701, "puntos_ideales_comision7.png", width = 5, height = 5, units = "in", dpi = 300)
###################################################
# ANALYSIS
###################################################
## OPEN DATA
tester <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/ideologico/posiciones_bunker.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
ggplot(tester, aes(coord1D,fabrega1)) +
geom_point()
###################################################
# SETTINGS
###################################################
rm(list=ls())
setwd("/Users/kennethbunker/Dropbox/GitHub/tresquintos.github.io/images/posicionamiento/")
###################################################
# LIBRARY
###################################################
if (!require("pacman")) install.packages("pacman")
pacman::p_load(# anominate, -- no longer maintained --
wnominate,
pscl,
ggplot2,
knitr,
devtools,
ggrepel,
writexl,
data.table)
library(coda)
library(purrr)
library(dplyr)
library(tidyverse)
library(rvest)
library(tidytext)
library(stringi)
library(stringr)
library(readxl)
library(pscl)
library(wnominate)
library(ggridges)
library(ggalt)
library(ggforce)
library(concaveman)
###################################################
# CC DATA
###################################################
# https://github.com/jaytimm/mds-for-linguists/blob/master/README.md
# https://github.com/imfd/notas-blog/blob/main/nominate/20%20Septiembre/DW-Nominate.R
# Dataset only has "1", "6" and "9"
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación pleno/votación particular.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Choose party label
apellidos <-as.matrix(raw_data$apellido)
## Standard party ID
legData <- raw_data$colectivo
## Keep others
colectivo <- raw_data$colectivo
bancada <- raw_data$bancada
partido <- raw_data$partido_general
comision <- raw_data$comision
## Erase votes other than a favor/en contra
raw_data[1:4] <- list(NULL)                                 # Drop main IDs
raw_data[2:9] <- list(NULL)                                 # Drop other IDs
raw_data[3:17] <- list(NULL)                                # Drop first round voting (pres/vp)
raw_data[980:989] <- list(NULL)                             # Drop second round voting (pres/vp)
raw_data <- raw_data[,colSums(is.na(raw_data))<nrow(raw_data)]
## Coding (wnominate requirment: 1/6/9)
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Transformation for wnominate
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
#legData<-matrix(CC[,2],length(CC[,2]),1)
legData <- matrix(legData)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
###################################################
# SETTINGS
###################################################
rm(list=ls())
setwd("/Users/kennethbunker/Dropbox/GitHub/tresquintos.github.io/images/posicionamiento/")
###################################################
# LIBRARY
###################################################
if (!require("pacman")) install.packages("pacman")
pacman::p_load(# anominate, -- no longer maintained --
wnominate,
pscl,
ggplot2,
knitr,
devtools,
ggrepel,
writexl,
data.table)
library(coda)
library(purrr)
library(dplyr)
library(tidyverse)
library(rvest)
library(tidytext)
library(stringi)
library(stringr)
library(readxl)
library(pscl)
library(wnominate)
library(ggridges)
library(ggalt)
library(ggforce)
library(concaveman)
###################################################
# CC DATA
###################################################
# https://github.com/jaytimm/mds-for-linguists/blob/master/README.md
# https://github.com/imfd/notas-blog/blob/main/nominate/20%20Septiembre/DW-Nominate.R
# Dataset only has "1", "6" and "9"
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación pleno/votación particular.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Choose party label
apellidos <-as.matrix(raw_data$apellido)
## Standard party ID
legData <- raw_data$colectivo
## Keep others
colectivo <- raw_data$colectivo
bancada <- raw_data$bancada
partido <- raw_data$partido_general
comision <- raw_data$comision
## Erase votes other than a favor/en contra
raw_data[1:4] <- list(NULL)                                 # Drop main IDs
raw_data[2:9] <- list(NULL)                                 # Drop other IDs
raw_data[3:17] <- list(NULL)                                # Drop first round voting (pres/vp)
raw_data[980:989] <- list(NULL)                             # Drop second round voting (pres/vp)
raw_data <- raw_data[,colSums(is.na(raw_data))<nrow(raw_data)]
## Coding (wnominate requirment: 1/6/9)
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Transformation for wnominate
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
#legData<-matrix(CC[,2],length(CC[,2]),1)
legData <- matrix(legData)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
View(raw_data)
View(raw_data)
###################################################
# SETTINGS
###################################################
rm(list=ls())
setwd("/Users/kennethbunker/Dropbox/GitHub/tresquintos.github.io/images/posicionamiento/")
###################################################
# LIBRARY
###################################################
if (!require("pacman")) install.packages("pacman")
pacman::p_load(# anominate, -- no longer maintained --
wnominate,
pscl,
ggplot2,
knitr,
devtools,
ggrepel,
writexl,
data.table)
library(coda)
library(purrr)
library(dplyr)
library(tidyverse)
library(rvest)
library(tidytext)
library(stringi)
library(stringr)
library(readxl)
library(pscl)
library(wnominate)
library(ggridges)
library(ggalt)
library(ggforce)
library(concaveman)
###################################################
# CC DATA
###################################################
# https://github.com/jaytimm/mds-for-linguists/blob/master/README.md
# https://github.com/imfd/notas-blog/blob/main/nominate/20%20Septiembre/DW-Nominate.R
# Dataset only has "1", "6" and "9"
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación pleno/votación particular.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Choose party label
apellidos <-as.matrix(raw_data$apellido)
## Standard party ID
legData <- raw_data$colectivo
## Keep others
colectivo <- raw_data$colectivo
bancada <- raw_data$bancada
partido <- raw_data$partido_general
comision <- raw_data$comision
## Erase votes other than a favor/en contra
raw_data[1:4] <- list(NULL)                                 # Drop main IDs
raw_data[2:9] <- list(NULL)                                 # Drop other IDs
raw_data[3:17] <- list(NULL)                                # Drop first round voting (pres/vp)
raw_data[980:989] <- list(NULL)                             # Drop second round voting (pres/vp)
raw_data <- raw_data[,colSums(is.na(raw_data))<nrow(raw_data)]
## Coding (wnominate requirment: 1/6/9)
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Transformation for wnominate
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
#legData<-matrix(CC[,2],length(CC[,2]),1)
legData <- matrix(legData)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
unique(raw_data)
###################################################
# SETTINGS
###################################################
rm(list=ls())
setwd("/Users/kennethbunker/Dropbox/GitHub/tresquintos.github.io/images/posicionamiento/")
###################################################
# LIBRARY
###################################################
if (!require("pacman")) install.packages("pacman")
pacman::p_load(# anominate, -- no longer maintained --
wnominate,
pscl,
ggplot2,
knitr,
devtools,
ggrepel,
writexl,
data.table)
library(coda)
library(purrr)
library(dplyr)
library(tidyverse)
library(rvest)
library(tidytext)
library(stringi)
library(stringr)
library(readxl)
library(pscl)
library(wnominate)
library(ggridges)
library(ggalt)
library(ggforce)
library(concaveman)
###################################################
# CC DATA
###################################################
# https://github.com/jaytimm/mds-for-linguists/blob/master/README.md
# https://github.com/imfd/notas-blog/blob/main/nominate/20%20Septiembre/DW-Nominate.R
# Dataset only has "1", "6" and "9"
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación pleno/votación particular.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
unique(raw_data)
###################################################
# SETTINGS
###################################################
rm(list=ls())
setwd("/Users/kennethbunker/Dropbox/GitHub/tresquintos.github.io/images/posicionamiento/")
###################################################
# LIBRARY
###################################################
if (!require("pacman")) install.packages("pacman")
pacman::p_load(# anominate, -- no longer maintained --
wnominate,
pscl,
ggplot2,
knitr,
devtools,
ggrepel,
writexl,
data.table)
library(coda)
library(purrr)
library(dplyr)
library(tidyverse)
library(rvest)
library(tidytext)
library(stringi)
library(stringr)
library(readxl)
library(pscl)
library(wnominate)
library(ggridges)
library(ggalt)
library(ggforce)
library(concaveman)
###################################################
# CC DATA
###################################################
# https://github.com/jaytimm/mds-for-linguists/blob/master/README.md
# https://github.com/imfd/notas-blog/blob/main/nominate/20%20Septiembre/DW-Nominate.R
# Dataset only has "1", "6" and "9"
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación pleno/votación particular.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Choose party label
apellidos <-as.matrix(raw_data$apellido)
## Standard party ID
legData <- raw_data$colectivo
## Keep others
colectivo <- raw_data$colectivo
bancada <- raw_data$bancada
partido <- raw_data$partido_general
comision <- raw_data$comision
## Erase votes other than a favor/en contra
raw_data[1:4] <- list(NULL)                                 # Drop main IDs
raw_data[2:9] <- list(NULL)                                 # Drop other IDs
raw_data[3:17] <- list(NULL)                                # Drop first round voting (pres/vp)
raw_data[980:989] <- list(NULL)                             # Drop second round voting (pres/vp)
raw_data <- raw_data[,colSums(is.na(raw_data))<nrow(raw_data)]
## Coding (wnominate requirment: 1/6/9)
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
unique(raw_data)
unique(raw_data)
View(raw_data)
###################################################
# SETTINGS
###################################################
rm(list=ls())
setwd("/Users/kennethbunker/Dropbox/GitHub/tresquintos.github.io/images/posicionamiento/")
###################################################
# LIBRARY
###################################################
if (!require("pacman")) install.packages("pacman")
pacman::p_load(# anominate, -- no longer maintained --
wnominate,
pscl,
ggplot2,
knitr,
devtools,
ggrepel,
writexl,
data.table)
library(coda)
library(purrr)
library(dplyr)
library(tidyverse)
library(rvest)
library(tidytext)
library(stringi)
library(stringr)
library(readxl)
library(pscl)
library(wnominate)
library(ggridges)
library(ggalt)
library(ggforce)
library(concaveman)
###################################################
# CC DATA
###################################################
# https://github.com/jaytimm/mds-for-linguists/blob/master/README.md
# https://github.com/imfd/notas-blog/blob/main/nominate/20%20Septiembre/DW-Nominate.R
# Dataset only has "1", "6" and "9"
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación pleno/votación particular.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Choose party label
apellidos <-as.matrix(raw_data$apellido)
## Standard party ID
legData <- raw_data$colectivo
## Keep others
colectivo <- raw_data$colectivo
bancada <- raw_data$bancada
partido <- raw_data$partido_general
comision <- raw_data$comision
## Erase votes other than a favor/en contra
raw_data[1:4] <- list(NULL)                                 # Drop main IDs
raw_data[2:9] <- list(NULL)                                 # Drop other IDs
raw_data[3:17] <- list(NULL)                                # Drop first round voting (pres/vp)
raw_data[980:989] <- list(NULL)                             # Drop second round voting (pres/vp)
raw_data <- raw_data[,colSums(is.na(raw_data))<nrow(raw_data)]
## Coding (wnominate requirment: 1/6/9)
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Transformation for wnominate
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
#legData<-matrix(CC[,2],length(CC[,2]),1)
legData <- matrix(legData)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
###################################################
# SETTINGS
###################################################
rm(list=ls())
setwd("/Users/kennethbunker/Dropbox/GitHub/tresquintos.github.io/images/posicionamiento/")
###################################################
# LIBRARY
###################################################
if (!require("pacman")) install.packages("pacman")
pacman::p_load(# anominate, -- no longer maintained --
wnominate,
pscl,
ggplot2,
knitr,
devtools,
ggrepel,
writexl,
data.table)
library(coda)
library(purrr)
library(dplyr)
library(tidyverse)
library(rvest)
library(tidytext)
library(stringi)
library(stringr)
library(readxl)
library(pscl)
library(wnominate)
library(ggridges)
library(ggalt)
library(ggforce)
library(concaveman)
###################################################
# CC DATA
###################################################
# https://github.com/jaytimm/mds-for-linguists/blob/master/README.md
# https://github.com/imfd/notas-blog/blob/main/nominate/20%20Septiembre/DW-Nominate.R
# Dataset only has "1", "6" and "9"
## csv file mine
raw_data <- read.csv("/Users/kennethbunker/Dropbox/Tresquintos/Convención 2021/legislativo/votación pleno/votación particular.csv",stringsAsFactors=FALSE, header=TRUE,strip.white=TRUE)
## Choose party label
apellidos <-as.matrix(raw_data$apellido)
## Standard party ID
legData <- raw_data$colectivo
## Keep others
colectivo <- raw_data$colectivo
bancada <- raw_data$bancada
partido <- raw_data$partido_general
comision <- raw_data$comision
## Erase votes other than a favor/en contra
raw_data[1:4] <- list(NULL)                                 # Drop main IDs
raw_data[2:9] <- list(NULL)                                 # Drop other IDs
raw_data[3:17] <- list(NULL)                                # Drop first round voting (pres/vp)
raw_data[980:989] <- list(NULL)                             # Drop second round voting (pres/vp)
raw_data <- raw_data[,colSums(is.na(raw_data))<nrow(raw_data)]
## Coding (wnominate requirment: 1/6/9)
raw_data[raw_data=="a favor"] <- "1"
raw_data[raw_data=="en contra"] <- "6"
raw_data[raw_data=="abstencion"] <- "9"
raw_data[raw_data=="na"] <- "9"
raw_data[raw_data==" "] <- "9"
raw_data[raw_data==""] <- "9"
raw_data[raw_data=="  "] <- "9"
## Transformation for wnominate
CC<-as.matrix(raw_data)
CC[1:5,1:6]
CCnames<-CC[,1]
#legData<-matrix(CC[,2],length(CC[,2]),1)
legData <- matrix(legData)
colnames(legData)<-"party"
CC<-CC[,-c(1,2)]
## Roll Call format
rc <- rollcall(CC, yea=c(1,2,3), nay=c(4,5,6),
missing=c(7,8,9),notInLegis=0, legis.names=CCnames,
legis.data=legData,
desc="CC Votes",
source="tresquintos.cl")
